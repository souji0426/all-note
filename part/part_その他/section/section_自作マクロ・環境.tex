\documentclass[C:/souji/all-note/note]{subfiles}

\begin{document}
この節ではこのノートで使用していた,
自前で定義したTeXのマクロや環境について紹介しています.
コンパイルされてPDFになると見えない部分なので,
それなりに価値はあると思います.
大抵あれこれ色んなインターネットのサイトを見ながら作っているので,
どこを参考にしたか分からないものをあるかもです.
なるべく参考になったサイトなどは参考文献にも載せておこうかと思っています.

\subsection{自作マクロ}\label{subsection:自作マクロ}
使用分野別にまとめておきます.
\begin{enumerate}
  \item 共通
    \begin{enumerate}
      \item 太字命令の簡略化 \\
        基礎的な用語は基本的にその英語と日本語を併記しているので,
        その太字命令が並んでいるのが煩わしいという理由で導入してみたもの.
\begin{verbatim*}
\newcommand{\textgtbf}[2]{\textgt{#1}（\textbf{#2}）}
\newcommand{\textbfgt}[2]{\textbf{#1}（\textgt{#2}）}
\end{verbatim*}
        例えば\verb*|\textgtbf{集合}{set}|で「\textgtbf{集合}{set}」,
        \verb*|\textbfgt{set}{集合}|で「\textbfgt{set}{集合}」となる.
      \item 各種参照系 \\
        ノートの一部分を参照した場合は,
        そのページ数も併記した方が親切かと考えて,
        このように参照先の記入は一回で済むようなマクロたちを作ってみた.
\begin{verbatim*}
\newcommand{\PartRef}[1]{第\ref{#1}部（\pageref{#1}ページ）}
\newcommand{\ChapRef}[1]{第\ref{#1}章（\pageref{#1}ページ）}
\newcommand{\SecRef}[1]{\ref{#1}節（\pageref{#1}ページ）}
\newcommand{\DefRef}[1]{Definition \ref{#1}（\pageref{#1}ページ）}
\newcommand{\ExRef}[1]{Example \ref{#1}（\pageref{#1}ページ）}
\newcommand{\LemRef}[1]{Lemma \ref{#1}（\pageref{#1}ページ）}
\newcommand{\ThRef}[1]{Theorem \ref{#1}（\pageref{#1}ページ）}
\newcommand{\FactRef}[1]{Fact \ref{#1}（\pageref{#1}ページ）}
\newcommand{\PropRef}[1]{Proposition \ref{#1}（\pageref{#1}ページ）}
\end{verbatim*}
    \item 定義するための記号 \\
      こういうのこそマクロにすべきだよねって.
\begin{verbatim*}
\newcommand{\defarr}{\ \mbox{$\stackrel{\text{def}}{\Longleftrightarrow}$}}
\newcommand{\defeq}{\ \mbox{$\stackrel{\text{def}}{=}$}}
\end{verbatim*}

    \end{enumerate}
  \item 基礎数学系
    \begin{enumerate}
      \item 集合の外延的記法に関するもの \\
        見栄えを整えることが多く見辛くなりやすいのでマクロにしてみた（流石にやり過ぎな気がしなくもない）.
        2種類の外延的記法にあわせて2つ用意している.
\begin{verbatim*}
\newcommand{\SetBar}[2]{
  \{\,#1\,\mid\,#2\,\}
}
\newcommand{\SetColon}[2]{
  \{\,#1\,:\,#2\,\}
}
\end{verbatim*}
      例えば\verb*|\SetBar{x}{x \neq x}|で「$\SetBar{x}{x \neq x}$」,
\begin{verbatim*}
\SetColon{|r|}{r \in \mathbb{R}}
\end{verbatim*}
      で「$\SetColon{|r|}{r \in \mathbb{R}}$」と出力される.
    \item 順序対や有限列に関するもの \\
    「langle」や「rangle」がたくさんあると見辛くなるので.
\begin{verbatim*}
\newcommand{\op}[2]{\langle #1,#2 \rangle}
\newcommand{\triple}[3]{\langle #1,#2,#3 \rangle}
\newcommand{\ntuple}[2]{\langle #1,\dots,#2 \rangle}
\newcommand{\singleseq}[1]{\langle #1 \rangle}
\end{verbatim*}
    \item 関数に関するもの \\
    まずは「$f$は$A$から$B$への（単射・全射・全単射）写像である」という述語の略記をマクロにする.
    人によっては\verb*|\colon|ではなく\verb*|:|を使う人もいるので,
    それぞれの状況にあわせてマクロで一括変換出来る方がいいかもと思った（そんなときがあるのか分からんけど）.
\begin{verbatim*}
\newcommand{\map}[3]{
  #1\colon #2 \to #3
}
\newcommand{\InjectionMap}[3]{
  #1\colon #2 \xrightarrow{\text{1-1}} #3
}
\newcommand{\SurjectionMap}[3]{
  #1\colon #2 \xrightarrow{\text{onto}} #3
}
\newcommand{\BijectionMap}[3]{
  #1\colon #2 \xrightarrow[\text{onto}]{1-1} #3
}
\end{verbatim*}
      そして写像・関数に関係する定義のためのコマンド一覧.
      写像の定義域の制限の記号は単なる$\|$を使う人もいるけれど,
      私はこれが好き.
      そして\verb*|\upharpoonright|が人によっては何を指しているのか分かりづらいし,
      連発するとかなり1行が長くなってしまうので,
      省略したい意図もある.
\begin{verbatim*}
\newcommand{\restric}{\mbox{$\upharpoonright$}}
\DeclareMathOperator{\dom}{dom}
\DeclareMathOperator{\ran}{ran}
\DeclareMathOperator{\fld}{fld}
\DeclareMathOperator{\id}{id}
\end{verbatim*}
  \end{enumerate}
\end{enumerate}

\subsection{自作環境}\label{subsection:自作環境}
\begin{enumerate}
  \item ぶら下げと背景変更 \\
    証明中の不要ならば読み飛ばしてほしい部分やテキストでは行間に相当する部分などを,
    ここに記述して分かりやすくするためのもの.
\begin{verbatim*}
\definecolor{BIP-back}{gray}{0.9}
\newenvironment{sub-block}[1]
  {
    \vspace{-5pt}
    \begin{tcolorbox}[
    colback = BIP-back,
    colframe = white,
    boxrule = 10pt,
    fonttitle = \bfseries,
    breakable = true]
    \begin{itemize} \item[#1]
  }
  {
    \end{itemize}
    \end{tcolorbox}
    \vspace{-5pt}
  }
\end{verbatim*}
    以下のように変数に何も入れないと
\begin{verbatim*}
\begin{sub-block}{}
  こんな感じ \\
  になって,
\end{sub-block}
\end{verbatim*}
    \begin{sub-block}{}
      こんな \\
      感じになって,
    \end{sub-block}
    例えば変数に\verb*|{\boldmath $\because$}\,|とか入れてみると,
    \begin{sub-block}{{\boldmath $\because$}\,}
      こんな \\
      感じになる.
    \end{sub-block}

    \end{enumerate}

\end{document}
