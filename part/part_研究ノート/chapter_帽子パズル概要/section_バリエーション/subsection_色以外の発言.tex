\documentclass[C:/souji/all-note/note]{subfiles}

\begin{document}

これまでのパズルでは囚人たちの色以外の発言としては「（自分の色が）分からない」というものだけでした.
またそのパズルではこの発言を他の囚人も聞くことができたため,
これがヒントして役に立つこともありました.

色以外の発言である「分からない」は私が沈黙という行為を発言に置き換えたものです.
もともと私がアレンジする前は,
\PuzzleRef{puzzle:hat-Gardner-simultaneous}はGardnerが紹介した以下のようなものでした（そのまま\cite{Puzzle004}の138ページより引用しています）.

\begin{puzzle}
  \label{puzzle:hat-Gardner-original}
  $A,B,C$の3人が目隠しされて,
  これから赤い帽子か緑の帽子を被せられると告げられる.
  彼らに帽子が被されたあとで目隠しが外される.
  そして彼らは,
  赤い帽子を見たら手を挙げるように,
  また,
  自分の帽子の色が確信できたら部屋を退出するように告げられる.
  帽子は3つとも赤だったので,
  3人とも手を挙げた.
  数分後,
  他の2人より賢かった$C$は,
  部屋を出ていった.
  彼は,
  どのようにして自分の帽子の色を推測できたのだろうか？
\end{puzzle}

このパズルはGardner自身がその本で指摘しているとおり曖昧な点が2つあります.
1つは数分後という部分です.
つまりその間は誰も発言しない沈黙の時間帯だったということです.
そしてその沈黙が全ての囚人にとってのヒントになっています.
これをPuzzle \ref{puzzle:hat-Gardner-simultaneous}では,
同時に「分からない」と発言し,
その発言を他の囚人にも聞こえたことにしました.
これ以外にも沈黙がヒントになっているものはたくさんあります.
それらもこのように「分からない」という発言をしたことに変更可能だと思います.

いま話題にしている色以外の発言という要素とは関係ありませんが,
曖昧なもう1つの点は「他の2人より賢かった」という部分です.
この曖昧さを排除するために全員が同じ賢さ（論理的思考力？）を持っているとして（もしくは賢さに言及しないで）,
全員が同時に自分の色が分かり部屋を出ていったというアレンジをしているものもあります.
\ToDoLater{
  全員出ていったバージョンのパズルを見つけたら引用する
}

どの囚人にとっても必要な情報は,
最初に帽子を見ただけでは自分も含めて誰も自分の帽子が分からなかったというものです.
なので\PuzzleRef{puzzle:hat-Gardner-order}では,
それを聞いて推論していくようなイメージが付きやすいよう,
順番で発言させるという私のアレンジが入っています.

まとめると本来は色以外の発言しかできないようなルールにしておきながら,
囚人が沈黙してしまったという情報を色以外の発言という捉え方をすることにしました.
おそらく私が初出なアレンジでも設定でもないとは思います.
しかし他の帽子パズルでは沈黙という意味ではない,
色以外の発言をするものもあります.
前置きが長くなりましたが,
この節ではこのノート執筆時点で知られている色以外の発言をするパズルをいくつか紹介します.

まず\PuzzleRef{puzzle:hat-Hardin-Taylor}のルールを変えたものと捉えることができるパズルを紹介します.
ルールの変更部分は色を変えておきます.

\begin{puzzle}
  \label{puzzle:hat-Ebert}
  看守があるゲームをするために2人の囚人を同じ部屋に入れ,
  帽子を1人に1つずつ被せます.
  その帽子は黒白どちらかの色で塗られています.
  囚人2人はそれぞれ自分が被っている帽子の色は分かりませんが,
  もう1人の囚人の帽子の色は見えています.
  また部屋に入ってからは互いに一切のコミュニケーションが取れません.
  この状態で{\color{red} 帽子の色のどちらかか,
  発言拒否を意味する「パス」を発言します}.
  つまり「黒」か「白」のみを2人同時に発言させ,
  その発言とその発言者が被っている帽子の色が一致していれば正解となり,
  そうでなければ不正解,
  {\color{red} 「パス」と発言した場合は正解にも不正解とも扱いません}.
  {\color{red} 「そして正解者が1人以上いて,
  かつ不正解者が0人ならば}囚人側の勝利として2人とも釈放されます.
  当たり前ですが看守がどのように帽子を被せるかは,
  囚人たちは入室するまで知りません.
  このゲームのルールや勝利条件については,
  部屋に入る前に囚人たちに伝えられ,
  ゲーム開始までに2人で戦略を相談することが可能です.
  {\color{red} 囚人たちは勝利する確率を最大どれくらいまで上げることが可能でしょうか}？
\end{puzzle}

Puzzle \ref{puzzle:hat-Hardin-Taylor}との違いは発言のパスが許されているところです.
それゆえに囚人たちの勝利条件やパズルの問いも変わっています.
「パス」は正解にも不正解にもなりません.
Puzzle \ref{puzzle:hat-Hardin-Taylor}での必勝戦略では常に正解者も不正解者も1人ずる発生することが分かるので,
このパズルでは必勝戦略にはなりません.
そしてこのパズルには必勝戦略は存在しません.
ゆえに確率は100％になることはありません.
そして最大確率は50％です.
そのときの戦略は1人は常に「パス」を発言し,
もう1人は黒か白か決めた色を（もう一人の色がなんであろうと）発言するというものです.

一見囚人数が増えても,
1人がどちらかの色を,
それ以外の全員がパスをするという50％勝率の戦略が最適化と思われますが,
実は囚人数が$n=2^k -1$人ならばHamming符号を用いることで,
勝率$n/n+1$となる戦略を作ることができます.
つまり3人ならば75％の,
7人ならば87.5％という勝利の戦略が存在します.
\ToDoLater{
  いずれエバートの論文読んだらコメントを解説を追加する.
}

よって以下の要素を持つパズルを\textbf{Eber}\textgt{の帽子パズル}と呼ぶことします.
\index{しゅうじんとぼうしのぱずる@囚人と帽子のパズル!えばーとのぼうしぱずる@Ebertの帽子パズル}
\begin{enumerate}
  \item 囚人たちは協力してゲームに臨む.
  \item 色以外の発言として「パス」が可能.
\end{enumerate}

\begin{boxnote}
  \label{memo:帽子パズルの命名理由}
  ちなみにこのように考案者の名前を借りて帽子パズルを命名する行為は,
  \cite{Hat001}の1ページ目にて著者であるHardinとTaylorが「Ebert' Hat problem」という記述を参考にしています.
  帽子パズルと総称するには種類が豊富過ぎると感じているので,
  特徴的なものでかつ考案者が分かっており,
  そして考案者が特別な名前を付けていない場合に,
  このように勝手ではありますが名前を付けていきたいと思います.
  もし考案者が何か特別な名前を付けていれば,
  それに従うことにします.
  例えば下のdeterministic coin flip帽子パズルとかがそれにあたります.
\end{boxnote}
\ToDoLater{
  ディラック・ガードナーの命名理由についても歴史パートを書いたらメモする
  また他の箇所からこのメモにリンクをはる
  あとはEOパズル部分を書いたら、ここにリンクをはる
}

色以外の発言が可能なパズルは,
発言が多様になったことで勝利条件という要素が正解数とは違う多様性を持ちます.
その例が以下のパズルです.

\begin{puzzle}
  \label{puzzle:hat-deterministic-coin-flip}
  看守があるゲームをするために8人の囚人を同じ部屋に入れ,
  帽子を1人に1つずつ被せます.
  その帽子には実数が1つずつ書いてあります.
  どの囚人も自分以外の囚人が被っている帽子の数が見えています.
  そして部屋に入ってからは互いに一切のコミュニケーションが取れません.
  部屋に入った後囚人たち全員に聞こえるように看守が1つの実数を発言します.
  そのあと囚人たちは同時に$0,1$のどちらかを発言します.
  看守が発言した実数よりも大きい数の帽子を被った$m$人の囚人たちの中で,
  $0$を発言した囚人と$1$を発言した囚人の数がそれぞれ$\lfloor m/2 \rfloor$を超えていた場合,
  囚人たちの勝利として全員釈放されます.
  そうでなければ敗北となって全員処刑されます.
  当たり前ですが看守がどのように帽子を被せるかとどの実数を発現するかは,
  囚人たちは入室するまで知りません.
  このゲームのルールや勝利条件については,
  部屋に入る前に囚人たちに伝えられ,
  ゲーム開始までに2人で戦略を相談することが可能です.
  このとき入室後にどのように帽子を被せられても,
  看守がどの実数を発現したとしても,
  常に囚人側が勝利する戦略は存在するでしょうか？
\end{puzzle}

このパズルも私のアレンジが入っています.
元ネタは\cite{Hat016}の15ページにて紹介された「Hat Puzzle 2 (deterministic coin flip)」です.
これまでの例では発現できるものの候補は,
色のみか,
色に色以外の「分からない」や「パス」を加えたものでしたが,
このパズルでは色は発現できず数字の$0,1$しか発現できない点がこれまでのパズルと異なる点です.
それにあわせてルールと勝利条件が変わっています.
\ToDoLater{
  必勝戦略の説明
  文献精読ができあがればどうアレンジしたかを書く
  サイコロバージョンも追記する
}

\end{document}
